<!DOCTYPE html><html lang="zh-CN"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">    <title>图片坐标工具</title>    <style>        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;600&display=swap');        * {            margin: 0;            padding: 0;            box-sizing: border-box;            font-family: 'Noto Serif SC', serif;            letter-spacing: 0.1px;            transition: all 0.25s ease-in-out;        }        html, body {            height: 100%;            overflow: hidden;            background-color: #f0ede8; /* 莫兰迪浅底 */        }        .app-wrap {            width: 100%;            height: 100%;            padding: 20px 20px 90px;            display: flex;            flex-direction: column;        }        .title-wrap {            position: relative;            margin-bottom: 16px;            padding-bottom: 10px;            border-bottom: 1px solid #e0ddd7;        }        .main-title {            font-size: 22px;            color: #635c52; /* 莫兰迪深棕 */            font-weight: 600;        }        .author {            position: absolute;            right: 0;            bottom: 10px;            font-size: 12px;            color: #a0988c; /* 莫兰迪浅棕 */            letter-spacing: 1px;        }        .img-container {            flex: 1;            border-radius: 20px;            border: 2px dashed #d0c9be; /* 莫兰迪边框 */            background-color: #f7f5f2; /* 莫兰迪浅灰 */            position: relative;            overflow: hidden;            display: flex;            justify-content: center;            align-items: center;            min-height: 180px;            width: 95%;            margin: 0 auto; /* 居中缩小容器 */        }        .upload-tip-layer {            text-align: center;            padding: 20px 15px;            z-index: 5;            display: flex;            flex-direction: column;            justify-content: center;            align-items: center;            gap: 14px;            width: 100%;            height: 100%;        }        .svg-icon {            width: 42px;            height: 42px;            fill: #b0a696; /* 莫兰迪图标色 */        }        .upload-text {            font-size: 16px;            color: #7d756a; /* 莫兰迪中棕 */            font-weight: 500;        }        .upload-subtext {            font-size: 12px;            color: #a0988c; /* 莫兰迪浅棕 */            max-width: 300px;            line-height: 1.5;            text-align: center;        }        .img-file-input {            position: absolute;            top: 0;            left: 0;            width: 100%;            height: 100%;            opacity: 0;            cursor: pointer;            z-index: 6;            display: block; /* 默认显示 */        }        .img-show-layer {            position: relative;            width: 100%;            height: 100%;            display: none;            z-index: 4;            overflow: auto;        }        .img-show-layer img {            display: block;            width: 100%;            height: 100%;            object-fit: contain;            padding: 10px;        }        .mark-point {            position: absolute;            border-radius: 50%;            transform: translate(-50%, -50%);            z-index: 8;            opacity: 0.85;            pointer-events: none;        }        .mark-point::after {            content: attr(data-index);            position: absolute;            top: 50%;            left: 50%;            transform: translate(-50%, -50%);            color: white;            font-size: 11px;            font-weight: 600;            line-height: 1;        }        .toolbar {            position: fixed;            bottom: 0;            left: 0;            width: 100%;            height: 60px; /* 降低工具栏高度 */            background-color: #ffffff;            border-top: 1px solid #e0ddd7;            padding: 0 10px 0 5px; /* 左侧内边距减小，右侧保留少量 */            display: flex;            align-items: center;            gap: 6px; /* 进一步减小按钮间距 */            z-index: 100;            box-shadow: 0 -2px 12px rgba(0, 0, 0, 0.03);        }        .tool-btn {            height: 36px; /* 缩小按钮高度（原48px） */            padding: 0 10px; /* 缩小内边距（原16px） */            border-radius: 10px; /* 缩小圆角 */            border: none;            font-size: 12px; /* 缩小字体（原14px） */            font-weight: 500;            cursor: pointer;            display: flex;            align-items: center;            justify-content: center;            gap: 4px; /* 缩小图标文字间距 */            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.03);            white-space: nowrap;        }        .btn-primary {            background-color: #b8a996; /* 莫兰迪主色 */            color: #ffffff;        }        .btn-primary:hover {            background-color: #a89986; /* 加深主色 */            transform: translateY(-1px);            box-shadow: 0 4px 10px rgba(184, 169, 150, 0.25);        }        .btn-secondary {            background-color: #f0ede8; /* 莫兰迪浅底 */            color: #7d756a; /* 莫兰迪中棕 */        }        .btn-secondary:hover {            background-color: #e8e4dd; /* 加深浅底 */            transform: translateY(-1px);            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.04);        }        .tool-btn svg {            width: 14px; /* 缩小图标（原16px） */            height: 14px;            fill: currentColor;        }        /* 画笔设置弹窗（居中显示） */        .brush-modal {            position: fixed;            top: 50%;            left: 50%;            transform: translate(-50%, -50%);            width: 85%;            max-width: 350px;            background-color: #ffffff;            border-radius: 18px;            border: 1px solid #e0ddd7;            padding: 25px 20px;            z-index: 1000;            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);            display: none;        }        .modal-close {            position: absolute;            top: 15px;            right: 15px;            width: 24px;            height: 24px;            fill: #a0988c;            cursor: pointer;        }        .modal-close:hover {            fill: #7d756a;        }        .modal-title {            font-size: 16px;            color: #635c52;            font-weight: 600;            margin-bottom: 20px;            text-align: center;        }        .modal-item {            margin-bottom: 20px;        }        .modal-item:last-child {            margin-bottom: 0;        }        .modal-label {            font-size: 14px;            color: #7d756a;            font-weight: 500;            margin-bottom: 8px;            display: block;        }        .color-options {            display: flex;            gap: 10px;            flex-wrap: wrap;        }        .color-option {            width: 28px;            height: 28px;            border-radius: 50%;            cursor: pointer;            border: 2px solid transparent;        }        .color-option.active {            border-color: #635c52;        }        .panel-wrap {            position: fixed;            bottom: 60px; /* 适配工具栏高度变化 */            left: 0;            width: 100%;            background-color: #ffffff;            border-radius: 20px 20px 0 0;            border-top: 1px solid #e0ddd7;            padding: 25px 20px;            z-index: 90;            display: none;            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.04);        }        .panel-close {            position: absolute;            top: 20px;            right: 20px;            width: 26px;            height: 26px;            fill: #a0988c; /* 莫兰迪浅棕 */            cursor: pointer;        }        .panel-close:hover {            fill: #7d756a; /* 莫兰迪中棕 */        }        .panel-item {            margin-bottom: 22px;        }        .panel-item:last-child {            margin-bottom: 0;        }        .panel-title {            font-size: 15px;            color: #7d756a; /* 莫兰迪中棕 */            font-weight: 500;            margin-bottom: 12px;            display: flex;            align-items: center;            gap: 8px;        }        .panel-title svg {            width: 18px;            height: 18px;            fill: #b8a996; /* 莫兰迪主色 */        }        .brush-set {            display: flex;            align-items: center;            gap: 12px;            width: 100%;        }        .brush-slider {            -webkit-appearance: none;            flex: 1;            height: 6px;            border-radius: 3px;            background: #e0ddd7; /* 莫兰迪滑块底 */            outline: none;        }        .brush-slider::-webkit-slider-thumb {            -webkit-appearance: none;            appearance: none;            width: 18px;            height: 18px;            border-radius: 50%;            background: #b8a996; /* 莫兰迪主色 */            cursor: pointer;            box-shadow: 0 2px 8px rgba(184, 169, 150, 0.3);        }        .brush-size {            font-size: 15px;            color: #b8a996; /* 莫兰迪主色 */            font-weight: 600;            min-width: 40px;            text-align: center;        }        .func-btns {            display: flex;            gap: 12px;            width: 100%;        }        .func-btn {            flex: 1;            height: 44px;            border-radius: 12px;            border: none;            font-size: 14px;            font-weight: 500;            cursor: pointer;            display: flex;            align-items: center;            justify-content: center;            gap: 6px;        }        .coord-list {            width: 100%;            max-height: 180px;            background-color: #f7f5f2; /* 莫兰迪浅灰 */            border-radius: 14px;            border: 1px solid #e0ddd7;            padding: 15px;            overflow-y: auto;        }        .list-count {            font-size: 14px;            color: #b8a996; /* 莫兰迪主色 */            font-weight: 500;            margin-bottom: 10px;        }        .mark-cards {            display: flex;            flex-direction: column;            gap: 10px;        }        .mark-card {            background-color: #ffffff;            border-radius: 10px;            border: 1px solid #e0ddd7;            padding: 10px 12px;            display: flex;            align-items: center;            justify-content: space-between;        }        .mark-info {            display: flex;            align-items: center;            gap: 10px;        }        .mark-tag {            width: 18px;            height: 18px;            border-radius: 50%;            display: inline-block;        }        .mark-num {            font-size: 14px;            color: #7d756a; /* 莫兰迪中棕 */            font-weight: 500;        }        .coord-value {            font-size: 13px;            color: #635c52; /* 莫兰迪深棕 */            font-weight: 500;        }        .copy-btn {            padding: 6px 12px;            border-radius: 8px;            border: none;            background-color: #f0ede8; /* 莫兰迪浅底 */            color: #7d756a; /* 莫兰迪中棕 */            font-size: 13px;            cursor: pointer;        }        .copy-btn:hover {            background-color: #e8e4dd; /* 加深浅底 */        }        .empty-card {            font-size: 13px;            color: #a0988c; /* 莫兰迪浅棕 */            text-align: center;            padding: 25px 10px;        }        /* 成功提示框：深色系优化（推荐莫兰迪深棕，醒目且协调） */        .success-toast {            position: fixed;            top: 25px;            left: 50%;            transform: translateX(-50%);            background-color: #635c52; /* 莫兰迪深棕（醒目不刺眼） */            color: #ffffff; /* 白色文字高对比度 */            padding: 12px 24px;            border-radius: 10px;            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12); /* 加深阴影增强层次感 */            display: flex;            align-items: center;            justify-content: space-between;            width: calc(100% - 50px);            max-width: 350px;            z-index: 1000;            opacity: 0;            pointer-events: none;            transition: opacity 0.3s ease, transform 0.3s ease;        }        .toast-content {            display: flex;            align-items: center;            gap: 10px;            font-size: 15px;            font-weight: 500;        }        .toast-content svg {            width: 20px;            height: 20px;            fill: #f0ede8; /* 浅底色图标，与深色背景对比 */        }        .toast-close {            width: 18px;            height: 18px;            fill: #f0ede8; /* 浅底色关闭图标 */            cursor: pointer;            pointer-events: auto;        }        .toast-close:hover {            fill: #ffffff; /* hover时变白更醒目 */        }        .success-toast.show {            opacity: 1;            transform: translateX(-50%) translateY(0);        }        @media (max-width: 375px) {            .main-title {                font-size: 20px;            }            .tool-btn {                padding: 0 8px;                font-size: 11px;            }            .func-btn {                font-size: 13px;            }            .upload-text {                font-size: 15px;            }            .img-container {                width: 98%;            }        }    </style></head><body>    <div class="app-wrap">        <div class="title-wrap">            <h1 class="main-title">图片坐标工具</h1>            <p class="author">漓（Li）制作</p>        </div>        <div class="img-container" id="imgContainer">            <div class="upload-tip-layer" id="uploadTipLayer">                <svg class="svg-icon" viewBox="0 0 24 24">                    <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-5-4l-3 3-3-3h2V9h2v6h2z"/>                </svg>                <div class="upload-text">点击或拖拽上传图片</div>                <div class="upload-subtext">支持JPG/PNG/GIF/WebP，点击图片添加坐标标记</div>            </div>            <input type="file" class="img-file-input" id="imgFileInput" accept="image/*">            <div class="img-show-layer" id="imgShowLayer">                <img src="" alt="预览图片" id="showImg">            </div>        </div>    </div>    <!-- 工具栏：上传图片按钮改为画笔大小，按钮缩小并左移 -->    <div class="toolbar">        <button class="tool-btn btn-secondary" id="brushSettingBtn">            <svg viewBox="0 0 24 24">                <path d="M7 14c-1.66 0-3 1.34-3 3 0 1.31-1.16 2-2 2 .92 1.22 2.49 2 4 2 2.21 0 4-1.79 4-4 0-1.66-1.34-3-3-3zm13.71-9.37l-1.34-1.34c-.39-.39-1.02-.39-1.41 0L9 12.25 11.75 15l8.96-8.96c.39-.39.39-1.02 0-1.41z"/>            </svg>            画笔大小        </button>        <button class="tool-btn btn-secondary" id="clearImg">            <svg viewBox="0 0 24 24">                <path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14V4zm0 16H5V8h14v12zm-4-6h-4v-2h4v2z"/>            </svg>            清除图片        </button>        <button class="tool-btn btn-primary" id="copyAllJson">            <svg viewBox="0 0 24 24">                <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>            </svg>            批量复制JSON        </button>        <button class="tool-btn btn-secondary" id="clearMarks">            <svg viewBox="0 0 24 24">                <path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14V4zm0 16H5V8h14v12zm-4-6h-4v-2h4v2z"/>            </svg>            清空标记        </button>    </div>    <!-- 画笔设置弹窗（居中显示） -->    <div class="brush-modal" id="brushModal">        <svg class="modal-close" id="modalClose" viewBox="0 0 24 24">            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/>        </svg>        <h3 class="modal-title">画笔设置</h3>        <div class="modal-item">            <label class="modal-label">画笔尺寸</label>            <div class="brush-set">                <input type="range" class="brush-slider" id="modalBrushSlider" min="3" max="60" value="10" step="1">                <span class="brush-size" id="modalBrushSize">10px</span>            </div>        </div>        <div class="modal-item">            <label class="modal-label">标记颜色</label>            <div class="color-options" id="colorOptions">                <div class="color-option active" data-color="#b8a996" style="background-color: #b8a996;"></div>                <div class="color-option" data-color="#a89986" style="background-color: #a89986;"></div>                <div class="color-option" data-color="#96b8b2" style="background-color: #96b8b2;"></div>                <div class="color-option" data-color="#969fb8" style="background-color: #969fb8;"></div>                <div class="color-option" data-color="#b896a6" style="background-color: #b896a6;"></div>                <div class="color-option" data-color="#96b89e" style="background-color: #96b89e;"></div>            </div>        </div>    </div>    <div class="panel-wrap" id="coordPanel">        <svg class="panel-close" id="coordClose" viewBox="0 0 24 24">            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/>        </svg>        <div class="panel-item">            <div class="panel-title">                <svg viewBox="0 0 24 24">                    <path d="M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7V4z"/>                </svg>                坐标标记列表            </div>            <div class="list-count" id="markCount">共 0 个标记</div>            <div class="coord-list">                <div class="mark-cards" id="markCards">                    <div class="empty-card">暂无标记，点击图片添加</div>                </div>            </div>        </div>        <div class="panel-item">            <div class="func-btns">                <button class="func-btn btn-primary" id="copyJsonBtn">导出JSON</button>                <button class="func-btn btn-secondary" id="copyTextBtn">导出纯文本</button>            </div>        </div>    </div>    <div class="success-toast" id="successToast">        <div class="toast-content">            <svg viewBox="0 0 24 24">                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/>            </svg>            复制成功！使用标源：漓（Li）        </div>        <svg class="toast-close" id="toastClose" viewBox="0 0 24 24">            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/>        </svg>    </div>    <script>        // 核心变量        const imgContainer = document.getElementById('imgContainer');        const uploadTipLayer = document.getElementById('uploadTipLayer');        const imgFileInput = document.getElementById('imgFileInput');        const imgShowLayer = document.getElementById('imgShowLayer');        const showImg = document.getElementById('showImg');        const markCount = document.getElementById('markCount');        const markCards = document.getElementById('markCards');        const successToast = document.getElementById('successToast');        const toastClose = document.getElementById('toastClose');                // 按钮元素        const brushSettingBtn = document.getElementById('brushSettingBtn');        const clearImgBtn = document.getElementById('clearImg');        const copyAllJsonBtn = document.getElementById('copyAllJson');        const clearMarksBtn = document.getElementById('clearMarks');        const coordClose = document.getElementById('coordClose');        const copyJsonBtn = document.getElementById('copyJsonBtn');        const copyTextBtn = document.getElementById('copyTextBtn');                // 画笔弹窗元素        const brushModal = document.getElementById('brushModal');        const modalClose = document.getElementById('modalClose');        const modalBrushSlider = document.getElementById('modalBrushSlider');        const modalBrushSize = document.getElementById('modalBrushSize');        const colorOptions = document.querySelectorAll('.color-option');                // 状态变量        let currentBrushSize = 10;        let currentColor = '#b8a996';        let markNumber = 0;        let imgOriginalW = 0, imgOriginalH = 0;        let imgRenderW = 0, imgRenderH = 0;        let markDataList = [];        let isImgUploaded = false;        // 初始化画笔尺寸（弹窗滑块同步初始值）        modalBrushSlider.value = currentBrushSize;        modalBrushSize.innerText = `${currentBrushSize}px`;        // 画笔设置按钮：打开弹窗        brushSettingBtn.addEventListener('click', () => {            brushModal.style.display = 'block';            // 弹窗滑块值同步当前画笔尺寸            modalBrushSlider.value = currentBrushSize;            modalBrushSize.innerText = `${currentBrushSize}px`;            // 颜色选项同步当前选中状态            colorOptions.forEach(option => {                if (option.dataset.color === currentColor) {                    option.classList.add('active');                } else {                    option.classList.remove('active');                }            });        });        // 关闭弹窗        modalClose.addEventListener('click', () => {            brushModal.style.display = 'none';        });        // 弹窗外部点击关闭        window.addEventListener('click', (e) => {            if (e.target === brushModal) {                brushModal.style.display = 'none';            }        });        // 弹窗画笔尺寸调节        modalBrushSlider.addEventListener('input', () => {            currentBrushSize = parseInt(modalBrushSlider.value);            modalBrushSize.innerText = `${currentBrushSize}px`;            // 实时更新已有标记尺寸            markDataList.forEach(mark => {                const point = document.getElementById(`markPoint_${mark.id}`);                if (point) {                    point.style.width = `${currentBrushSize}px`;                    point.style.height = `${currentBrushSize}px`;                }            });        });        // 弹窗颜色选择        colorOptions.forEach(option => {            option.addEventListener('click', () => {                currentColor = option.dataset.color;                colorOptions.forEach(opt => opt.classList.remove('active'));                option.classList.add('active');                // 实时更新已有标记颜色                markDataList.forEach(mark => {                    const point = document.getElementById(`markPoint_${mark.id}`);                    if (point) {                        point.style.backgroundColor = currentColor;                        // 更新标记数据中的颜色                        mark.color = currentColor;                    }                });                // 更新标记列表UI中的颜色标签                updateMarkListUI();            });        });        // 清除图片        clearImgBtn.addEventListener('click', () => {            if (!isImgUploaded) return;            // 重置状态            isImgUploaded = false;            imgFileInput.value = '';            showImg.src = '';            imgShowLayer.style.display = 'none';            uploadTipLayer.style.display = 'flex';            imgFileInput.style.display = 'block';            // 清空标记            clearAllMarks();        });        // 图片上传处理        imgFileInput.addEventListener('change', handleImgUpload);        // 拖拽上传        imgContainer.addEventListener('dragover', (e) => {            if (isImgUploaded) return;            e.preventDefault();            e.stopPropagation();            imgContainer.style.borderColor = currentColor;            imgContainer.style.backgroundColor = '#f2efe9';        });        imgContainer.addEventListener('dragleave', (e) => {            if (isImgUploaded) return;            e.preventDefault();            e.stopPropagation();            imgContainer.style.borderColor = '#d0c9be';            imgContainer.style.backgroundColor = '#f7f5f2';        });        imgContainer.addEventListener('drop', (e) => {            if (isImgUploaded) return;            e.preventDefault();            e.stopPropagation();            imgContainer.style.borderColor = '#d0c9be';            imgContainer.style.backgroundColor = '#f7f5f2';            const files = e.dataTransfer?.files || [];            if (files.length > 0 && files[0].type.startsWith('image/')) {                imgFileInput.files = files;                handleImgUpload();            }        });        // 批量复制JSON        copyAllJsonBtn.addEventListener('click', copyAllJson);        // 清空标记        clearMarksBtn.addEventListener('click', clearAllMarks);        // 复制按钮事件        copyJsonBtn.addEventListener('click', copyAllJson);        copyTextBtn.addEventListener('click', copyAllText);        // 关闭面板        coordClose.addEventListener('click', () => coordPanel.style.display = 'none');        toastClose.addEventListener('click', () => successToast.classList.remove('show'));        // 图片点击添加标记        imgContainer.addEventListener('click', handleImgClickMark);        // 图片加载完成初始化尺寸        showImg.onload = initImgSize;        window.addEventListener('resize', initImgSize);        // 图片上传处理函数        function handleImgUpload() {            const file = imgFileInput.files[0];            if (!file || !file.type.startsWith('image/')) {                alert('请选择有效的图片文件（JPG/PNG/GIF/WebP）');                return;            }            const reader = new FileReader();            reader.onload = function(e) {                showImg.src = e.target.result;                const tempImg = new Image();                tempImg.src = e.target.result;                tempImg.onload = function() {                    imgOriginalW = tempImg.width;                    imgOriginalH = tempImg.height;                }            }            reader.readAsDataURL(file);            // 切换显示状态            uploadTipLayer.style.display = 'none';            imgShowLayer.style.display = 'block';            imgFileInput.style.display = 'none'; // 隐藏文件输入，避免重复上传            isImgUploaded = true;        }        // 初始化图片尺寸        function initImgSize() {            if (imgShowLayer.style.display === 'block') {                imgRenderW = showImg.offsetWidth;                imgRenderH = showImg.offsetHeight;            }        }        // 图片点击添加标记        function handleImgClickMark(e) {            if (!isImgUploaded) return; // 未上传图片不触发            const rect = showImg.getBoundingClientRect();            // 仅在图片区域内点击有效            if (e.clientX < rect.left || e.clientX > rect.right || e.clientY < rect.top || e.clientY > rect.bottom) return;                        const x = e.clientX - rect.left;            const y = e.clientY - rect.top;            imgRenderW = showImg.offsetWidth;            imgRenderH = showImg.offsetHeight;                        if (x < 0 || x > imgRenderW || y < 0 || y > imgRenderH) return;                        // 生成标记数据            markNumber++;            const markId = markNumber;            const relX = (x / imgRenderW).toFixed(4);            const relY = (y / imgRenderH).toFixed(4);            const percentX = (relX * 100).toFixed(2) + '%';            const percentY = (relY * 100).toFixed(2) + '%';            const originalX = Math.round(relX * imgOriginalW);            const originalY = Math.round(relY * imgOriginalH);                        // 创建标记点（添加data-index属性存储顺序号）            const markPoint = document.createElement('div');            markPoint.className = 'mark-point';            markPoint.id = `markPoint_${markId}`;            markPoint.dataset.index = markId; // 存储顺序号            markPoint.style.width = `${currentBrushSize}px`;            markPoint.style.height = `${currentBrushSize}px`;            markPoint.style.left = `${x}px`;            markPoint.style.top = `${y}px`;            markPoint.style.backgroundColor = currentColor;            imgShowLayer.appendChild(markPoint);                        // 保存标记数据            markDataList.push({                id: markId,                 color: currentColor,                 relX,                 relY,                 percentX,                 percentY,                 originalX,                 originalY,                 renderX: x,                 renderY: y            });                        // 更新标记列表UI            updateMarkListUI();        }        // 更新标记列表UI        function updateMarkListUI() {            const len = markDataList.length;            markCount.innerText = `共 ${len} 个标记`;                        if (len === 0) {                markCards.innerHTML = '<div class="empty-card">暂无标记，点击图片添加</div>';                return;            }                        let listHtml = '';            markDataList.forEach(mark => {                listHtml += `                <div class="mark-card" id="markCard_${mark.id}">                    <div class="mark-info">                        <span class="mark-tag" style="background-color:${mark.color};"></span>                        <span class="mark-num">标记${mark.id}</span>                        <span class="coord-value">left:${mark.percentX}, top:${mark.percentY}</span>                    </div>                    <button class="copy-btn" onclick="copySingleCoord(${mark.id})">复制</button>                </div>                `;            });            markCards.innerHTML = listHtml;        }        // 清空所有标记        function clearAllMarks() {            if (markDataList.length === 0) return;            markNumber = 0;            markDataList = [];            // 移除所有标记点DOM            document.querySelectorAll('.mark-point').forEach(point => point.remove());            // 更新UI            updateMarkListUI();        }        // 复制单个坐标        function copySingleCoord(markId) {            const mark = markDataList.find(item => item.id === markId);            if (!mark) return;            const copyContent = `{"left": "${mark.percentX}", "top": "${mark.percentY}"}`;            doCopy(copyContent);        }        // 复制所有JSON        function copyAllJson() {            if (markDataList.length === 0) {                alert('暂无坐标标记，无法复制');                return;            }            let copyContent = '[\n';            markDataList.forEach((mark, index) => {                copyContent += `  {"left": "${mark.percentX}", "top": "${mark.percentY}"}${index === markDataList.length - 1 ? '' : ','}\n`;            });            copyContent += ']';            doCopy(copyContent);        }        // 复制所有纯文本        function copyAllText() {            if (markDataList.length === 0) {                alert('暂无坐标标记，无法复制');                return;            }            let copyContent = '';            markDataList.forEach(mark => {                copyContent += `left: ${mark.percentX}, top: ${mark.percentY}\n`;            });            doCopy(copyContent);        }        // 执行复制        function doCopy(content) {            if (navigator.clipboard) {                navigator.clipboard.writeText(content).then(() => showToast('复制成功！使用标源：漓（Li）')).catch(() => {                    alert(`复制失败，请手动复制：\n\n${content}`);                });            } else {                const textarea = document.createElement('textarea');                textarea.value = content;                document.body.appendChild(textarea);                textarea.select();                document.execCommand('copy');                document.body.removeChild(textarea);                showToast('复制成功！使用标源：漓（Li）');            }        }        // 显示提示框        function showToast(text) {            successToast.querySelector('.toast-content').innerHTML = `<svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/></svg>${text}`;            successToast.classList.add('show');            setTimeout(() => {                successToast.classList.remove('show');            }, 3000);        }        // 暴露全局函数（用于单个复制按钮）        window.copySingleCoord = copySingleCoord;    </script></body></html>